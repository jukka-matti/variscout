---
/**
 * JourneyToolNav - Navigate between tools in journey order
 * Shows prev/next links + "See this in the full journey" CTA
 */

import { getToolBySlug } from '../data/toolsData';

interface Props {
	currentPillar: 'CHANGE' | 'FLOW' | 'FAILURE' | 'VALUE';
	prevToolSlug?: string;
	nextToolSlug?: string;
	journeySection: number;
	lang: string;
}

const { currentPillar, prevToolSlug, nextToolSlug, journeySection, lang } = Astro.props;

const prevTool = prevToolSlug ? getToolBySlug(prevToolSlug) : null;
const nextTool = nextToolSlug ? getToolBySlug(nextToolSlug) : null;

// Pillar color classes
const pillarColors: Record<string, { bg: string; text: string; border: string }> = {
	VALUE: { bg: 'bg-green-500/10', text: 'text-green-500', border: 'border-green-500/30' },
	CHANGE: { bg: 'bg-blue-500/10', text: 'text-blue-500', border: 'border-blue-500/30' },
	FLOW: { bg: 'bg-orange-500/10', text: 'text-orange-500', border: 'border-orange-500/30' },
	FAILURE: { bg: 'bg-red-500/10', text: 'text-red-500', border: 'border-red-500/30' },
};

// Journey section IDs for anchor links
const sectionIds: Record<string, string> = {
	VALUE: 'value',
	CHANGE: 'change',
	FLOW: 'flow',
	FAILURE: 'failure',
};
---

<section class="py-12 bg-neutral-50 border-t border-neutral-200">
	<div class="container-wide">
		<div class="text-center mb-8">
			<span class="text-xs font-bold uppercase tracking-widest text-neutral-500">Journey Navigation</span>
			<h2 class="text-2xl font-bold mt-2 text-neutral-900">Continue the Journey</h2>
		</div>

		<!-- Prev/Next Navigation -->
		<div class="flex flex-col sm:flex-row items-stretch gap-4 max-w-3xl mx-auto mb-8">
			{/* Previous Tool */}
			{prevTool ? (
				<a
					href={`/${lang}/tools/${prevTool.slug}`}
					class:list={[
						'flex-1 group flex items-center gap-4 p-4 rounded-xl border-2 transition-all hover:shadow-lg',
						pillarColors[prevTool.pillar || 'VALUE'].bg,
						pillarColors[prevTool.pillar || 'VALUE'].border,
					]}
				>
					<div class="flex-shrink-0">
						<svg class="w-6 h-6 text-neutral-400 group-hover:-translate-x-1 transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24">
							<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" />
						</svg>
					</div>
					<div class="text-left">
						<span class={`text-xs font-bold uppercase tracking-wider ${pillarColors[prevTool.pillar || 'VALUE'].text}`}>
							{prevTool.pillar}
						</span>
						<p class="font-semibold text-neutral-900">{prevTool.name}</p>
					</div>
				</a>
			) : (
				<div class="flex-1 p-4 rounded-xl border-2 border-dashed border-neutral-200 flex items-center justify-center text-neutral-400 text-sm">
					Start of journey
				</div>
			)}

			{/* Next Tool */}
			{nextTool ? (
				<a
					href={`/${lang}/tools/${nextTool.slug}`}
					class:list={[
						'flex-1 group flex items-center justify-end gap-4 p-4 rounded-xl border-2 transition-all hover:shadow-lg',
						pillarColors[nextTool.pillar || 'VALUE'].bg,
						pillarColors[nextTool.pillar || 'VALUE'].border,
					]}
				>
					<div class="text-right">
						<span class={`text-xs font-bold uppercase tracking-wider ${pillarColors[nextTool.pillar || 'VALUE'].text}`}>
							{nextTool.pillar}
						</span>
						<p class="font-semibold text-neutral-900">{nextTool.name}</p>
					</div>
					<div class="flex-shrink-0">
						<svg class="w-6 h-6 text-neutral-400 group-hover:translate-x-1 transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24">
							<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
						</svg>
					</div>
				</a>
			) : (
				<div class="flex-1 p-4 rounded-xl border-2 border-dashed border-neutral-200 flex items-center justify-center text-neutral-400 text-sm">
					End of journey
				</div>
			)}
		</div>

		<!-- Journey CTA -->
		<div class="text-center">
			<a
				href={`/${lang}/journey#${sectionIds[currentPillar]}`}
				class="inline-flex items-center gap-2 text-brand-primary hover:underline font-medium"
			>
				<span>See this step in the full journey</span>
				<svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
					<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3" />
				</svg>
			</a>
		</div>
	</div>
</section>
