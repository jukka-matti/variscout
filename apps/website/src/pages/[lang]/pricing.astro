---
import BaseLayout from "../../layouts/BaseLayout.astro";
import PricingCard from "../../components/PricingCard.astro";
import PricingFAQ from "../../components/PricingFAQ.astro";
import { ShieldCheck, Zap, FileText, RefreshCw, Cloud, Check } from "lucide-astro";
import { ui } from "../../i18n/ui";

export function getStaticPaths() {
  const languages = Object.keys(ui);
  return languages.map((lang) => ({ params: { lang } }));
}

const pricingTiers = [
	{
		name: "Demo",
		price: "€0",
		period: "forever",
		description: "Explore sample analyses in your browser",
		features: [
			"16 sample datasets",
			"Full chart gallery",
			"Interactive analysis",
			"Learn variation concepts",
		],
		limitations: [
			"Sample data only",
			"No file upload",
			"No saving",
		],
		cta: { text: "Try Demo", href: "/app" },
		ctaNote: "Opens in browser",
	},
	{
		name: "Free",
		price: "€0",
		period: "forever",
		description: "Install to analyze your own data",
		features: [
			"Upload CSV/Excel files",
			"Manual data entry",
			"Full analysis tools",
			"Works offline",
		],
		limitations: [
			"Session-only (no save)",
			"Watermark on exports",
		],
		cta: { text: "Install App", href: "/app" },
		ctaNote: "PWA - works like native app",
		highlight: true,
		badge: "Most Popular",
	},
	{
		name: "Licensed",
		price: "€99",
		period: "/year",
		description: "Save projects and export without watermarks",
		features: [
			"Everything in Free, plus:",
			"Save projects locally",
			"Export/import .vrs files",
			"Save analysis templates",
			"No watermark on exports",
			"Theme customization",
		],
		cta: { text: "Get License", href: "/app?upgrade=true" },
		ctaNote: "One-time license key",
		whereToGet: "In-app Upgrade",
	},
	{
		name: "Excel",
		price: "€99",
		period: "/year",
		description: "VaRiScout inside Excel",
		features: [
			"Excel Add-in for Windows/Mac/Web",
			"Analyze data directly in spreadsheets",
			"Save settings in workbook",
			"Native Excel experience",
		],
		cta: { text: "Get Add-in", href: "https://appsource.microsoft.com/", external: true },
		ctaNote: "Via Microsoft AppSource",
		whereToGet: "Microsoft AppSource",
	},
];

const faqs = [
	{
		question: "Why can't I upload files in my browser?",
		answer: "For privacy, your data never leaves your device. This requires installing the app as a PWA (Progressive Web App). Installation is free and takes 2 clicks - no app store needed.",
	},
	{
		question: "What's the difference between Demo and Free?",
		answer: "Demo runs in your browser with sample data only - great for exploring and learning. Free is the installed app that works offline and lets you upload your own CSV/Excel files. Both are completely free.",
	},
	{
		question: "How do I upgrade from Free to Licensed?",
		answer: "Click 'Upgrade' in the app's Settings. Complete the secure checkout (powered by Paddle). Your license activates instantly — no waiting for email. A backup key is emailed to you just in case.",
	},
	{
		question: "Where does my data go?",
		answer: "Nowhere. VaRiScout runs entirely in your browser/device. Your data never leaves. We don't have servers that see your data — that's by design.",
	},
];

const trustBadges = [
	{ icon: ShieldCheck, text: "Secure payment via Paddle" },
	{ icon: Zap, text: "Instant activation" },
	{ icon: FileText, text: "VAT invoice included" },
	{ icon: RefreshCw, text: "30-day money-back" },
];
---

<BaseLayout
	title="VaRiScout Pricing | Demo Free, Install Free, License €99"
	description="VaRiScout pricing: Demo with samples in browser. Install free to upload your data. €99/year license for saving projects."
>
	<section class="py-20 bg-white border-b border-neutral-200">
		<div class="container-wide text-center">
			<h1 class="text-4xl md:text-5xl font-bold mb-6">Simple pricing. <span class="text-brand-primary">Start free.</span></h1>
			<p class="text-xl text-neutral-600 max-w-2xl mx-auto mb-16 italic">
				Demo in your browser. Install to upload your data. License to save projects.
			</p>

			<div class="grid md:grid-cols-2 lg:grid-cols-4 gap-6 text-left">
				{pricingTiers.map((tier) => <PricingCard {...tier} />)}
			</div>

			<p class="text-center text-sm text-neutral-500 mt-8 italic">
				All prices exclude VAT. VAT will be calculated at checkout where applicable.
			</p>
		</div>
	</section>

	<!-- Trust Badges -->
	<section class="py-12 bg-neutral-50 border-b border-neutral-200">
		<div class="container-wide">
			<div class="flex flex-wrap items-center justify-center gap-8 md:gap-16">
				{trustBadges.map((badge) => (
					<div class="flex items-center gap-3 text-neutral-600 grayscale opacity-80">
						<badge.icon size={20} aria-hidden="true" />
						<span class="text-sm font-medium italic">{badge.text}</span>
					</div>
				))}
			</div>
		</div>
	</section>

	<!-- FAQ -->
	<section class="py-24 bg-white">
		<div class="container-wide">
			<h2 class="text-3xl font-bold text-center mb-16">Pricing FAQ</h2>
			<PricingFAQ items={faqs} />
		</div>
	</section>

	<!-- Team Options -->
	<section class="py-24 bg-neutral-50 border-b border-neutral-200">
		<div class="container-wide">
			<div class="text-center mb-12">
				<h2 class="text-3xl font-bold mb-4">Need Team or Enterprise Features?</h2>
				<p class="text-neutral-600">For organizations needing central deployment and full control</p>
			</div>
			<div class="max-w-xl mx-auto">
				<div class="bg-white p-8 rounded-2xl border border-neutral-200">
					<div class="flex items-center gap-3 mb-4">
						<Cloud size={24} class="text-brand-primary" />
						<h3 class="text-xl font-bold">Azure Deployment</h3>
					</div>
					<p class="text-sm text-neutral-500 mb-2">For organizations wanting full control</p>
					<p class="text-neutral-700 mb-4">Self-hosted in your Azure tenant with SSO, custom branding, and unlimited team members.</p>
					<ul class="space-y-2 mb-6">
						<li class="flex items-center gap-2 text-sm text-neutral-600"><Check size={16} class="text-brand-primary" />Custom domain (analysis.yourcompany.com)</li>
						<li class="flex items-center gap-2 text-sm text-neutral-600"><Check size={16} class="text-brand-primary" />SSO integration (Azure AD)</li>
						<li class="flex items-center gap-2 text-sm text-neutral-600"><Check size={16} class="text-brand-primary" />Custom branding (your logo)</li>
						<li class="flex items-center gap-2 text-sm text-neutral-600"><Check size={16} class="text-brand-primary" />Unlimited team members</li>
						<li class="flex items-center gap-2 text-sm text-neutral-600"><Check size={16} class="text-brand-primary" />Data stays in your tenant</li>
					</ul>
					<p class="text-lg font-bold mb-4">€1799/year + hosting (excl. VAT)</p>
					<a href="https://azuremarketplace.microsoft.com/" target="_blank" rel="noopener" class="btn btn-secondary w-full text-center block">
						View in Azure Marketplace
					</a>
				</div>
			</div>
		</div>
	</section>

	<!-- Privacy Callout -->
	<section class="py-20 bg-brand-secondary text-white">
		<div class="container-wide">
			<div class="flex flex-col md:flex-row items-center gap-12 bg-white/5 p-12 rounded-3xl border border-white/10">
				<div class="p-4 bg-brand-primary rounded-2xl text-white shadow-2xl shadow-brand-primary/20">
					<ShieldCheck size={48} />
				</div>
				<div class="flex-1 text-center md:text-left">
					<h2 class="text-2xl font-bold mb-4">Your Data Stays Yours</h2>
					<p class="text-neutral-400 max-w-2xl italic">
						VaRiScout is designed for sensitive operational data. It runs entirely on your side — in your browser, your Excel, your Power BI, or your Azure tenant. We never see your data.
					</p>
				</div>
				<div>
					<a href="/app" class="btn btn-primary px-8 py-3 whitespace-nowrap">Open VaRiScout</a>
				</div>
			</div>
		</div>
	</section>
</BaseLayout>
