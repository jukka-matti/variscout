---
import BaseLayout from "../../layouts/BaseLayout.astro";
import Hero from "../../components/Hero.astro";
import MiniJourney from "../../components/MiniJourney.astro";
import FourPillars from "../../components/FourPillars.astro";
import UseCaseCard from "../../components/UseCaseCard.astro";
import ProductCard from "../../components/ProductCard.astro";
import { ui } from "../../i18n/ui";
import { getLangFromUrl } from "../../i18n/utils";

export function getStaticPaths() {
  const languages = Object.keys(ui);
  return languages.map((lang) => ({ params: { lang } }));
}

const lang = getLangFromUrl(Astro.url);

const hero = {
	headline: "See Beyond Averages.",
	emphasis: "Find your 46%.",
	subhead: "46% of your improvement potential may be hiding in one place. VaRiScout finds WHERE to focus. Simple enough for anyone. Rigorous enough for experts.",
	primaryCTA: { text: "Try Free", href: "/app" },
	secondaryCTA: { text: "Take the Journey", href: `/${lang}/journey` },
	primaryCTANote: "Demo with samples • Install to upload",
	showAveragesHook: true,
};

const useCases = [
	{
		id: "lss",
		title: "LSS Training & Projects",
		description: "Simplified statistics for Green Belts and trainers. Learn the methodology, not the software.",
		bullets: ["Zero learning curve", "Plain language insights", "Perfect for tollgate presentations"],
		cta: { text: "Learn More", href: "/use-cases/lss-training" },
	},
	{
		id: "operations",
		title: "Quality & Operations",
		description: "Live analysis for daily decisions. Answer questions in the meeting, not after.",
		bullets: ["Analyze live with your team", "No waiting for reports", "Visual clarity for everyone"],
		cta: { text: "Learn More", href: "/use-cases/operations" },
	},
	{
		id: "high-density",
		title: "High-Density Analysis",
		description: "Monitor 100+ channels simultaneously. Scalable performance tracking for massive systems.",
		bullets: ["100+ channel ranking", "Auto-outlier detection", "Real-time scalability"],
		cta: { text: "Learn More", href: "/use-cases/high-density" },
	},
];

const products = [
	{ id: "web", title: "Web App", description: "Demo in browser. Install to upload.", price: "Demo → Free → €49", cta: { text: "Try Demo", href: "/app" } },
	{ id: "excel", title: "Excel", description: "Add-in for Excel users.", price: "Free / €49", cta: { text: "Get Add-in", href: "/product/excel" } },
	{ id: "powerbi", title: "Power BI", description: "Custom visuals for dashboards.", price: "From €399", cta: { text: "View Suite", href: "/product/power-bi" } },
	{ id: "azure", title: "Azure", description: "Self-deploy to your tenant.", price: "€999", cta: { text: "Learn More", href: "/product/azure" } },
];
---

<BaseLayout>
	<Hero {...hero} />

	<!-- Mini Journey: The Transformation -->
	<MiniJourney lang={lang} />

	<!-- Four Pillars: The Framework -->
	<FourPillars lang={lang} />

	<!-- Use Cases -->
	<section class="py-24 bg-neutral-50 overflow-hidden">
		<div class="container-wide">
			<h2 class="text-3xl font-bold text-center mb-16">Two Worlds, One Tool</h2>
			<div class="grid md:grid-cols-2 gap-8">
				{useCases.map((useCase) => <UseCaseCard {...useCase} />)}
			</div>
		</div>
	</section>

	<!-- Products -->
	<section class="py-24 bg-white border-b border-neutral-200">
		<div class="container-wide">
			<div class="text-center mb-16">
				<h2 class="text-3xl font-bold mb-4">Choose Your Platform</h2>
				<p class="text-neutral-600">Same analysis, wherever you work</p>
			</div>
			<div class="grid sm:grid-cols-2 lg:grid-cols-4 gap-6">
				{products.map((product) => <ProductCard {...product} />)}
			</div>
		</div>
	</section>

	<!-- Final CTA -->
	<section class="py-24 bg-brand-primary text-white overflow-hidden relative">
		<div class="absolute inset-0 opacity-10">
			<div class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[800px] h-[800px] border border-white rounded-full"></div>
			<div class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[600px] h-[600px] border border-white rounded-full"></div>
		</div>
		<div class="container-wide text-center relative z-10">
			<h2 class="text-4xl font-bold mb-6">Where's YOUR 46%?</h2>
			<p class="text-brand-primary-light text-xl mb-10 max-w-2xl mx-auto">
				Your data is hiding opportunity. Find it. Fix it. Check it. Continue.
			</p>
			<div class="flex flex-col sm:flex-row gap-4 justify-center">
				<a href="/app" class="btn bg-white text-brand-primary hover:bg-neutral-50 text-lg px-10 py-4 shadow-xl">
					Try Free - No Signup
				</a>
				<a href={`/${lang}/journey`} class="btn border-2 border-white text-white hover:bg-white/10 text-lg px-10 py-4">
					Take the Journey
				</a>
			</div>
			<p class="mt-6 text-sm text-white/60">
				Your data stays on your device. Always.
			</p>
		</div>
	</section>
</BaseLayout>
