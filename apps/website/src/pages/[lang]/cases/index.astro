---
import BaseLayout from "../../../layouts/BaseLayout.astro";
import { ui } from "../../../i18n/ui";

// Case study summaries for the hub page
const cases = [
	{
		slug: "bottleneck",
		week: 1,
		phase: 1,
		title: "The Bottleneck",
		subtitle: "Finding the Hidden Constraint",
		description: "A process with 5 steps. Step 3 was blamed for delays. But what did the data actually show?",
		tools: ["I-Chart", "Boxplot"],
		industry: "Manufacturing",
	},
	{
		slug: "hospital-ward",
		week: 5,
		phase: 2,
		title: "Hospital Ward",
		subtitle: "The Aggregation Trap",
		description: "The dashboard showed 75% occupancy. Everything looked fine. But nurses were overwhelmed. What was hiding in the average?",
		tools: ["I-Chart", "Time Analysis"],
		industry: "Healthcare",
	},
	{
		slug: "coffee",
		week: 9,
		phase: 3,
		title: "Coffee Quality",
		subtitle: "East Africa Washing Station",
		description: "Drying Bed C keeps failing export specs. Is it the bed, the operator, or the measurement?",
		tools: ["Boxplot", "Gage R&R"],
		industry: "Agriculture",
	},
	{
		slug: "packaging",
		week: 9,
		phase: 3,
		title: "Packaging Defects",
		subtitle: "Africa Manufacturing",
		description: "Night shift underfills consistently. Management wants to retrain. But is training the answer?",
		tools: ["Pareto", "Boxplot", "I-Chart"],
		industry: "Manufacturing",
	},
	{
		slug: "avocado",
		week: 12,
		phase: 3,
		title: "Avocado Coating",
		subtitle: "Post-Harvest Optimization",
		description: "More coating = longer shelf life. But 28% of variation is unexplained. Where is it coming from?",
		tools: ["Regression", "Gage R&R"],
		industry: "Agriculture",
	},
];

export function getStaticPaths() {
	const languages = Object.keys(ui);
	return languages.map((lang) => ({ params: { lang } }));
}

const { lang } = Astro.params;

// Group cases by phase
const phase1Cases = cases.filter(c => c.phase === 1);
const phase2Cases = cases.filter(c => c.phase === 2);
const phase3Cases = cases.filter(c => c.phase === 3);
---

<BaseLayout
	title="VaRiScout | Case Studies"
	description="Interactive case studies demonstrating variation analysis. Explore real problems, find hidden patterns, learn practical skills."
>
	<!-- Hero -->
	<section class="py-20 bg-white border-b border-neutral-200">
		<div class="container-wide">
			<div class="max-w-3xl">
				<h1 class="text-4xl md:text-5xl font-bold mb-6">Case Studies</h1>
				<p class="text-xl text-neutral-600 leading-relaxed">
					Real problems. Hidden patterns. Interactive exploration.
				</p>
				<p class="text-neutral-500 mt-4">
					Each case includes an interactive VaRiScout demo. Click, explore, and find the insight yourself.
				</p>
			</div>
		</div>
	</section>

	<!-- Phase 1: Launch -->
	<section class="py-16 bg-neutral-50">
		<div class="container-wide">
			<div class="flex items-center gap-4 mb-8">
				<span class="text-sm font-bold text-brand-primary uppercase tracking-wider">Phase 1</span>
				<span class="text-sm text-neutral-400">Launch (Weeks 1-4)</span>
			</div>
			<div class="grid md:grid-cols-2 lg:grid-cols-3 gap-6">
				{phase1Cases.map((caseStudy) => (
					<a
						href={`/${lang}/cases/${caseStudy.slug}`}
						class="group p-6 bg-white border border-neutral-200 rounded-2xl hover:border-brand-primary hover:shadow-lg transition-all"
					>
						<div class="flex items-center gap-2 mb-4">
							<span class="text-xs font-medium px-2 py-1 bg-neutral-100 text-neutral-600 rounded">
								Week {caseStudy.week}
							</span>
							<span class="text-xs text-neutral-400">{caseStudy.industry}</span>
						</div>
						<h3 class="text-xl font-bold mb-1 group-hover:text-brand-primary transition-colors">
							{caseStudy.title}
						</h3>
						<p class="text-sm text-neutral-500 mb-3">{caseStudy.subtitle}</p>
						<p class="text-neutral-600 text-sm leading-relaxed mb-4">
							{caseStudy.description}
						</p>
						<div class="flex flex-wrap gap-2">
							{caseStudy.tools.map((tool) => (
								<span class="text-xs px-2 py-1 bg-brand-primary/10 text-brand-primary rounded">
									{tool}
								</span>
							))}
						</div>
					</a>
				))}
			</div>
		</div>
	</section>

	<!-- Phase 2: Deepen -->
	<section class="py-16 bg-white">
		<div class="container-wide">
			<div class="flex items-center gap-4 mb-8">
				<span class="text-sm font-bold text-brand-primary uppercase tracking-wider">Phase 2</span>
				<span class="text-sm text-neutral-400">Deepen (Weeks 5-8)</span>
			</div>
			<div class="grid md:grid-cols-2 lg:grid-cols-3 gap-6">
				{phase2Cases.map((caseStudy) => (
					<a
						href={`/${lang}/cases/${caseStudy.slug}`}
						class="group p-6 bg-white border border-neutral-200 rounded-2xl hover:border-brand-primary hover:shadow-lg transition-all"
					>
						<div class="flex items-center gap-2 mb-4">
							<span class="text-xs font-medium px-2 py-1 bg-neutral-100 text-neutral-600 rounded">
								Week {caseStudy.week}
							</span>
							<span class="text-xs text-neutral-400">{caseStudy.industry}</span>
						</div>
						<h3 class="text-xl font-bold mb-1 group-hover:text-brand-primary transition-colors">
							{caseStudy.title}
						</h3>
						<p class="text-sm text-neutral-500 mb-3">{caseStudy.subtitle}</p>
						<p class="text-neutral-600 text-sm leading-relaxed mb-4">
							{caseStudy.description}
						</p>
						<div class="flex flex-wrap gap-2">
							{caseStudy.tools.map((tool) => (
								<span class="text-xs px-2 py-1 bg-brand-primary/10 text-brand-primary rounded">
									{tool}
								</span>
							))}
						</div>
					</a>
				))}
			</div>
		</div>
	</section>

	<!-- Phase 3: Apply -->
	<section class="py-16 bg-neutral-50">
		<div class="container-wide">
			<div class="flex items-center gap-4 mb-8">
				<span class="text-sm font-bold text-brand-primary uppercase tracking-wider">Phase 3</span>
				<span class="text-sm text-neutral-400">Apply (Weeks 9-12)</span>
			</div>
			<div class="grid md:grid-cols-2 lg:grid-cols-3 gap-6">
				{phase3Cases.map((caseStudy) => (
					<a
						href={`/${lang}/cases/${caseStudy.slug}`}
						class="group p-6 bg-white border border-neutral-200 rounded-2xl hover:border-brand-primary hover:shadow-lg transition-all"
					>
						<div class="flex items-center gap-2 mb-4">
							<span class="text-xs font-medium px-2 py-1 bg-neutral-100 text-neutral-600 rounded">
								Week {caseStudy.week}
							</span>
							<span class="text-xs text-neutral-400">{caseStudy.industry}</span>
						</div>
						<h3 class="text-xl font-bold mb-1 group-hover:text-brand-primary transition-colors">
							{caseStudy.title}
						</h3>
						<p class="text-sm text-neutral-500 mb-3">{caseStudy.subtitle}</p>
						<p class="text-neutral-600 text-sm leading-relaxed mb-4">
							{caseStudy.description}
						</p>
						<div class="flex flex-wrap gap-2">
							{caseStudy.tools.map((tool) => (
								<span class="text-xs px-2 py-1 bg-brand-primary/10 text-brand-primary rounded">
									{tool}
								</span>
							))}
						</div>
					</a>
				))}
			</div>
		</div>
	</section>

	<!-- CTA -->
	<section class="py-20 bg-neutral-900 text-white">
		<div class="container-wide text-center">
			<h2 class="text-3xl font-bold mb-4">Ready to find what's hiding in YOUR data?</h2>
			<p class="text-neutral-400 mb-8 max-w-2xl mx-auto">
				These cases used VaRiScout to find patterns in seconds. Try it with your own data - free, no signup required.
			</p>
			<div class="flex gap-4 justify-center">
				<a href="/app" class="btn btn-primary px-8 py-3">Try Free</a>
				<a href={`/${lang}/pricing`} class="btn btn-secondary px-8 py-3 border-white/20 text-white hover:bg-white/10">See Pricing</a>
			</div>
		</div>
	</section>
</BaseLayout>
